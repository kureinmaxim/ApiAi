# üîå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü–æ—Ä—Ç–∞–º–∏ –≤ ApiAi

–î–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É ApiAi –∏ TelegramHelper, –≤–∫–ª—é—á–∞—è —Å–º–µ–Ω—É –ø–æ—Ä—Ç–æ–≤.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç **8000**.

```
ApiAi (–∫–ª–∏–µ–Ω—Ç) ‚Üí HTTP POST ‚Üí –ü–æ—Ä—Ç 8000 ‚Üí TelegramHelper (—Å–µ—Ä–≤–µ—Ä)
```

- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: HTTP (–∏–ª–∏ HTTPS —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏)
- **Endpoint**: `/ai_query` –∏–ª–∏ `/ai_query/secure` (—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º)
- **–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: `8000`

---

## –°–º–µ–Ω–∞ –ø–æ—Ä—Ç–∞: –°–µ—Ä–≤–µ—Ä (TelegramHelper)

–°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker. –î–ª—è —Å–º–µ–Ω—ã –ø–æ—Ä—Ç–∞:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ `docker-compose.yml` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   nano /opt/TelegramHelper/docker-compose.yml
   ```

2. **–ò–∑–º–µ–Ω–∏—Ç–µ –í–ù–ï–®–ù–ò–ô –ø–æ—Ä—Ç (–ø–µ—Ä–≤–æ–µ —á–∏—Å–ª–æ):**
   ```yaml
   services:
     telegram-api:
       ports:
         - "9090:8000"  # –í–ù–ï–®–ù–ò–ô:–í–ù–£–¢–†–ï–ù–ù–ò–ô
   ```
   ‚ö†Ô∏è –í—Ç–æ—Ä–æ–µ —á–∏—Å–ª–æ (`8000`) –Ω–µ –º–µ–Ω—è–π—Ç–µ!

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   ```bash
   docker compose up -d
   ```

–¢–µ–ø–µ—Ä—å —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω: `http://IP_–°–ï–†–í–ï–†–ê:9090`

---

## –°–º–µ–Ω–∞ –ø–æ—Ä—Ç–∞: –ö–ª–∏–µ–Ω—Ç (ApiAi)

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ GUI (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ ApiAi
2. –†–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –Ω–∞ —Ñ—É—Ç–µ—Ä, PIN: 1234)
3. –ú–µ–Ω—é ‚Üí Settings ‚Üí API Keys
4. –í–∫–ª–∞–¥–∫–∞ "Telegram Bot API"
5. –ü–æ–ª–µ **–ü–æ—Ä—Ç**: –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `9090`)
6. URL –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
7. –ù–∞–∂–º–∏—Ç–µ "Save"

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ config —Ñ–∞–π–ª

1. –ó–∞–∫—Ä–æ–π—Ç–µ ApiAi
2. –û—Ç–∫—Ä–æ–π—Ç–µ `config_qt.json`
3. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ URL:
   ```json
   {
     "api_keys": {
       "telegram_url": "http://YOUR_SERVER_IP:9090/ai_query"
     }
   }
   ```
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ ApiAi

---

## –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Ä—Ç–æ–≤

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ü–æ—Ä—Ç –≤ ApiAi –¥–æ–ª–∂–µ–Ω **—Å–æ–≤–ø–∞–¥–∞—Ç—å** —Å –≤–Ω–µ—à–Ω–∏–º –ø–æ—Ä—Ç–æ–º Docker –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

| TelegramHelper (Docker) | ApiAi Settings | –°—Ç–∞—Ç—É—Å |
|-------------------------|----------------|--------|
| `8000:8000` | `http://...:8000` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `9090:8000` | `http://...:9090` | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `9090:8000` | `http://...:8000` | ‚ùå –û—à–∏–±–∫–∞ |

---

## Firewall –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

–ï—Å–ª–∏ –ø–æ—Ä—Ç –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ firewall:

### UFW (Ubuntu/Debian)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo ufw status

# –û—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 9090
sudo ufw allow 9090/tcp
sudo ufw reload
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ª—É—à–∞—é—â–∏–µ –ø–æ—Ä—Ç—ã
sudo ss -tulpn | grep LISTEN

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—Ç
sudo ss -tulpn | grep 9090
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

–° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:

```bash
nc -zv YOUR_SERVER_IP 9090
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
- `Connection succeeded` ‚Äî –ü–æ—Ä—Ç –æ—Ç–∫—Ä—ã—Ç ‚úÖ
- `Connection refused` ‚Äî –ü–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç ‚ùå
- `Operation timed out` ‚Äî Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç ‚ö†Ô∏è

---

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–í ApiAi —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

‚úÖ **GUI –ø–æ–ª–µ** –¥–ª—è —Å–º–µ–Ω—ã –ø–æ—Ä—Ç–∞ (`gui/settings_dialog.py`)
- QSpinBox —Å –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º 1-65535
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–æ—Ä—Ç–∞
- –ü–∞—Ä—Å–∏–Ω–≥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ URL –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ—Ä—Ç–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è URL**
- –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ—Ä—Ç–∞ URL –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã (http/https)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ hostname

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30.11.2025  
**–ê–≤—Ç–æ—Ä:** Kurein M.N.  
**–í–µ—Ä—Å–∏—è:** 1.0

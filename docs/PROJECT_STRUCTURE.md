# ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ ApiAi

ะญัะพั ะดะพะบัะผะตะฝั ะพะฟะธััะฒะฐะตั ััััะบัััั ะฒัะตะณะพ ะฟัะพะตะบัะฐ ApiAi, ะฒะบะปััะฐั ะฒัะต ััะธ ะฒะตััะธะธ.

## ๐ ะะฑัะฐั ััััะบัััะฐ ะฟัะพะตะบัะฐ

```
ApiAi/
โโโ shared-rs/             # ๐ฆ ะะฑัะฐั ะฑะธะฑะปะธะพัะตะบะฐ (NEW!)
โโโ tauri-app/             # ๐ Tauri ะฒะตััะธั (ัะพะฒัะตะผะตะฝะฝะฐั, ัะตะบะพะผะตะฝะดัะตะผะฐั)
โโโ python/                # ๐ Python ะฒะตััะธั (dev utilities)
โโโ rust/                  # ๐ฆ Rust CLI (ัะบัะฟะตัะธะผะตะฝัะฐะปัะฝะฐั)
โโโ docs/                  # ๐ ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
โ   โโโ CHEAT_SHEET.md     # ะจะฟะฐัะณะฐะปะบะฐ ะบะพะผะฐะฝะด
โ   โโโ ENCRYPTION.md      # ะัะพัะพะบะพะป ัะธััะพะฒะฐะฝะธั
โ   โโโ KEYS_MANAGEMENT.md # ะฃะฟัะฐะฒะปะตะฝะธะต ะบะปััะฐะผะธ API
โ   โโโ PORTS.md           # ะกะตัะตะฒัะต ะฟะพััั
โ   โโโ PROJECT_STRUCTURE.md  # ะญัะพั ัะฐะนะป
โโโ BUILD.md               # ๐จ ะะฝััััะบัะธะธ ะฟะพ ัะฑะพัะบะต
โโโ CLEANUP.md             # ๐งน ะะฝััััะบัะธะธ ะฟะพ ะพัะธััะบะต (NEW!)
โโโ VERSION_MANAGEMENT.md  # ๐ฆ ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะตััะธัะผะธ
โโโ README.md              # ๐ ะะปะฐะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ Makefile               # ๐ ะะพะผะฐะฝะดั ัะฟัะฐะฒะปะตะฝะธั ะฟัะพะตะบัะพะผ
โโโ config_qt.json         # โ๏ธ ะะฑัะธะน ะบะพะฝัะธะณ (gitignored)
```

---

## ๐ฆ ะะฑัะฐั ะฑะธะฑะปะธะพัะตะบะฐ (`shared-rs/`)

**NEW!** ะะฑัะฐั Rust ะฑะธะฑะปะธะพัะตะบะฐ ะดะปั ััััะฐะฝะตะฝะธั ะดัะฑะปะธัะพะฒะฐะฝะธั ะบะพะดะฐ.

### ๐ ะกัััะบัััะฐ

```
shared-rs/
โโโ src/
โ   โโโ lib.rs            # ะญะบัะฟะพัั ะผะพะดัะปะตะน
โ   โโโ api.rs            # API ะบะปะธะตะฝัั (Anthropic, OpenAI, Telegram)
โ   โโโ encryption.rs     # AES-256-GCM ัะธััะพะฒะฐะฝะธะต
โโโ Cargo.toml            # ะะฐะฝะธัะตัั ะฑะธะฑะปะธะพัะตะบะธ
โโโ README.md             # ะะพะบัะผะตะฝัะฐัะธั
```

### ๐ฏ ะะฐะทะฝะฐัะตะฝะธะต

**ะัะฟะพะปัะทัะตััั ะฒ:**
- `rust/` - Rust CLI ะฒะตััะธั
- `tauri-app/src-tauri/` - Tauri backend

**ะกะพะดะตัะถะธั:**
- `ApiClient` trait - ะพะฑัะธะน ะธะฝัะตััะตะนั ะดะปั ะฒัะตั ะฟัะพะฒะฐะนะดะตัะพะฒ
- `AnthropicClient` - Anthropic Claude API
- `OpenAIClient` - OpenAI GPT API
- `TelegramClient` - Telegram bot API ั ัะธััะพะฒะฐะฝะธะตะผ
- `SecureMessenger` - AES-256-GCM ะบัะธะฟัะพะณัะฐัะธั

**ะัะตะธะผััะตััะฒะฐ:**
- โ ะฃัััะฐะฝะตะฝะพ ะดัะฑะปะธัะพะฒะฐะฝะธะต 774 ัััะพะบ ะบะพะดะฐ
- โ ะะดะธะฝัะน ะธััะพัะฝะธะบ ะดะปั API ะธ ัะธััะพะฒะฐะฝะธั
- โ ะฃะฟัะพัะตะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต ะธ ะฟะพะดะดะตัะถะบะฐ

---

## ๐ Tauri ะฒะตััะธั (`tauri-app/`)

ะกะพะฒัะตะผะตะฝะฝะฐั ะฒะตััะธั ั ะฒะตะฑ-ะธะฝัะตััะตะนัะพะผ ะธ Rust ะฑัะบะตะฝะดะพะผ.

> **Note:** ะัะฟะพะปัะทัะตั `shared-rs` ะดะปั API ะบะปะธะตะฝัะพะฒ ะธ ัะธััะพะฒะฐะฝะธั.

### ๐ ะกัััะบัััะฐ

```
tauri-app/
โโโ src/                    # Frontend (Web)
โ   โโโ index.html         # HTML ััััะบัััะฐ
โ   โโโ styles.css         # ะกัะธะปะธ ั ะณัะฐะดะธะตะฝัะฐะผะธ
โ   โโโ main.js            # JavaScript ะปะพะณะธะบะฐ
โ   โโโ provider-settings.js  # Provider Settings modal (NEW!)
โ   โโโ file-editor.js     # File Editor mode (NEW!)
โโโ src-tauri/             # Backend (Rust)
โ   โโโ src/
โ   โ   โโโ main.rs        # ะขะพัะบะฐ ะฒัะพะดะฐ Tauri
โ   โ   โโโ lib.rs         # ะะธะฑะปะธะพัะตัะฝัะน ะบะพะด (ะธัะฟะพะปัะทัะตั shared-rs)
โ   โโโ Cargo.toml         # Rust ะทะฐะฒะธัะธะผะพััะธ (ะฒะบะปััะฐั shared-rs)
โ   โโโ tauri.conf.json    # ะะพะฝัะธะณััะฐัะธั Tauri + fs permissions
โโโ package.json           # Node.js ะทะฐะฒะธัะธะผะพััะธ
โโโ README.md              # ะะพะบัะผะตะฝัะฐัะธั Tauri ะฒะตััะธะธ
```

### ๐ฏ ะะปััะตะฒัะต ัะฐะนะปั

#### Frontend

- **`src/index.html`**
  - PIN ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะดะปั ะทะฐัะธัั ะฝะฐัััะพะตะบ
  - Provider Settings ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ (NEW!)
  - Sidebar ั ะฟัะพะฒะฐะนะดะตัะพะผ ะธ ะบะฝะพะฟะบะฐะผะธ
  - ะะฑะปะฐััั ัะฐัะฐ ั File Editor mode
  - ะคััะตั ั ะธะฝัะพัะผะฐัะธะตะน (ัะฐะทัะฐะฑะพััะธะบ, ะฒะตััะธั, ะดะฐัะฐ, ัะฐะทะผะตั ะพะบะฝะฐ)

- **`src/styles.css`**
  - ะกะพะฒัะตะผะตะฝะฝัะน ะดะธะทะฐะนะฝ ั purple/indigo ะณัะฐะดะธะตะฝัะฐะผะธ
  - ะะฝะธะผะฐัะธะธ ะธ transitions
  - Glassmorphism ัััะตะบัั
  - ะกัะธะปะธ ะดะปั ะผะพะดะฐะปัะฝัั ะพะบะพะฝ ะธ ะทะฐัะธัะตะฝะฝัั ะฟะพะปะตะน

- **`src/main.js`**
  - PIN ะปะพะณะธะบะฐ (ัะฐะทะฑะปะพะบะธัะพะฒะบะฐ ะดะปั Settings)
  - Event listeners ัะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะพ ะฒ `init()`
  - ะััะปะตะถะธะฒะฐะฝะธะต ัะฐะทะผะตัะฐ ะพะบะฝะฐ
  - Chat mode & File Editor mode
  - Echo ัะตัั ั ะดะตัะฐะปัะฝะพะน ััะฐัะธััะธะบะพะน

- **`src/provider-settings.js`** (NEW!)
  - ะะพะดะฐะปัะฝะพะต ะพะบะฝะพ ะดะปั ะฝะฐัััะพะนะบะธ ะฟัะพะฒะฐะนะดะตัะฐ
  - ะกะพััะฐะฝะตะฝะธะต ะฒ `config_qt.json` ัะตัะตะท Tauri backend
  - ะะฒัะพะทะฐะณััะทะบะฐ ัะพััะฐะฝะตะฝะฝัั ะฝะฐัััะพะตะบ
  - ะะพะบะฐะท/ัะบัััะธะต API ะบะปััะตะน

- **`src/file-editor.js`** (NEW!)
  - File Editor mode ะดะปั ัะตะดะฐะบัะธัะพะฒะฐะฝะธั ัะฐะนะปะพะฒ ัะตัะตะท AI
  - ะัะฑะพั ัะฐะนะปะฐ, ะพัะฟัะฐะฒะบะฐ AI, ัะพััะฐะฝะตะฝะธะต ะธะทะผะตะฝะตะฝะธะน
  - ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต (_AI_1, _AI_2 ะธ ั.ะด.)
  - ะะปะธะบ ะฟะพ ะธะผะตะฝะธ ัะฐะนะปะฐ โ ะบะพะฟะธัะพะฒะฐะฝะธะต ะฟััะธ

#### Backend

- **`src-tauri/src/main.rs`**
  - ะะฝะธัะธะฐะปะธะทะฐัะธั Tauri ะฟัะธะปะพะถะตะฝะธั
  - ะะตะณะธัััะฐัะธั ะบะพะผะฐะฝะด
  
- **`src-tauri/src/lib.rs`**
  - Tauri ะบะพะผะฐะฝะดั (perform_search, check_pin, etc.)
  - ะะผะฟะพััะธััะตั API ะบะปะธะตะฝัั ะธะท `shared-rs`
  - ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะตะน ะธ ัะพััะพัะฝะธะตะผ

---

## ๐ฆ Rust CLI ะฒะตััะธั (`rust/`)

ะญะบัะฟะตัะธะผะตะฝัะฐะปัะฝะฐั ะบะพะผะฐะฝะดะฝะฐั ัััะพะบะฐ ะฒะตััะธั.

> **Note:** ะัะฟะพะปัะทัะตั `shared-rs` ะดะปั API ะบะปะธะตะฝัะพะฒ ะธ ัะธััะพะฒะฐะฝะธั.

### ๐ ะกัััะบัััะฐ

```
rust/
โโโ src/
โ   โโโ main.rs            # ะขะพัะบะฐ ะฒัะพะดะฐ (egui GUI, ะธัะฟะพะปัะทัะตั shared-rs)
โโโ Cargo.toml             # ะะฐะฝะธัะตัั ะฟัะพะตะบัะฐ (ะฒะบะปััะฐั shared-rs)
โโโ Cargo.lock             # ะคะธะบัะฐัะธั ะฒะตััะธะน ะทะฐะฒะธัะธะผะพััะตะน
โโโ Makefile               # ะะพะผะฐะฝะดั ัะฟัะฐะฒะปะตะฝะธั ะฒะตััะธัะผะธ
โโโ README.md              # ะะพะบัะผะตะฝัะฐัะธั Rust ะฒะตััะธะธ
```

### ๐ฆ ะะปััะตะฒัะต ัะฐะนะปั

#### ะะพะฝัะธะณััะฐัะธั ะธ ะกะฑะพัะบะฐ

- **`Cargo.toml`**
  - ะะตัะฐะดะฐะฝะฝัะต ะฟัะพะตะบัะฐ (ะธะผั, ะฒะตััะธั, ะฐะฒัะพั)
  - ะกะฟะธัะพะบ ะทะฐะฒะธัะธะผะพััะตะน (`reqwest`, `serde`, `aes-gcm`)

- **`Cargo.lock`**
  - ะะฒัะพะณะตะฝะตัะธััะตะผัะน ัะฐะนะป
  - ะคะธะบัะธััะตั ัะพัะฝัะต ะฒะตััะธะธ ะทะฐะฒะธัะธะผะพััะตะน
  - **ะะต ัะตะดะฐะบัะธัะพะฒะฐัั ะฒัััะฝัั**

- **`Makefile`**
  - ะะพะผะฐะฝะดั ะดะปั ัะฟัะฐะฒะปะตะฝะธั ะฒะตััะธัะผะธ
  - ะกะธะฝััะพะฝะธะทะฐัะธั ะบะพะฝัะธะณะพะฒ
  - ะะฟัะตะดะตะปัะตั ะะก ะดะปั ะฒัะฑะพัะฐ Python ะธะฝัะตัะฟัะตัะฐัะพัะฐ

#### ะััะพะดะฝัะน ะบะพะด

- **`src/main.rs`**
  - egui GUI ะฟัะธะปะพะถะตะฝะธะต (ัะบัะฟะตัะธะผะตะฝัะฐะปัะฝะพะต)
  - ะะผะฟะพััะธััะตั API ะบะปะธะตะฝัั ะธะท `shared-rs`
  - ะะฐัััะพะนะบะธ ะธ ัะฟัะฐะฒะปะตะฝะธะต ัะพััะพัะฝะธะตะผ

---

## ๐ Python ะฒะตััะธั (`python/`)

**ะะฐะทะฝะฐัะตะฝะธะต:** Development utilities ะธ ัะบัะธะฟัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ.

**ะัะฝะพะฒะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต:**
- โ ะกะบัะธะฟัั ัะฟัะฐะฒะปะตะฝะธั ะฒะตััะธัะผะธ (`scripts/update_version.py`)
- โ ะฃัะธะปะธัั ะฐะฒัะพะผะฐัะธะทะฐัะธะธ ัะฑะพัะบะธ (future)
- โ๏ธ Legacy GUI ะฟัะธะปะพะถะตะฝะธะต (ััะฐะฑะธะปัะฝะพะต, ะฝะพ ัััะฐัะตะปะพ ะฒ ะฟะพะปัะทั Tauri)

**ะะตะบะพะผะตะฝะดะฐัะธั:** ะะปั ัะพะฒัะตะผะตะฝะฝะพะณะพ GUI ะธัะฟะพะปัะทัะนัะต **Tauri ะฒะตััะธั**.

ะกะผ. [python/README.md](../python/README.md) ะดะปั ะฟะพะดัะพะฑะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ.

---

## ๐ ะะฑัะธะต ัะฐะนะปั

### ๐ `config_qt.json` (ะบะพัะตะฝั ะฟัะพะตะบัะฐ)

ะะดะธะฝัะน ะบะพะฝัะธะณััะฐัะธะพะฝะฝัะน ัะฐะนะป ะดะปั ะฒัะตั ะฒะตััะธะน:

```json
{
  "app_info": {
    "name": "ApiAi",
    "version": "2.1.1",
    "developer_en": "Maksim Kurein"
  },
  "api_keys": {
    "anthropic": "",
    "openai": "",
    "telegram_url": "http://...",
    "telegram_key": "...",
    "telegram_enc_key": "...",
    "telegram_use_encryption": true
  },
  "ui": {
    "theme": "dark"
  },
  "security": {
    "pin_code": "1234",
    "require_pin": true
  }
}
```

**ะัะธะผะตัะฐะฝะธะต:** ะคะฐะนะป ะฝะฐัะพะดะธััั ะฒ `.gitignore` ะธ ัะพะทะดะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต.

### ๐ `docs/` (ะดะพะบัะผะตะฝัะฐัะธั)

ะัั ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ ัะพะฑัะฐะฝะฐ ะฒ ะพะดะฝะพะผ ะผะตััะต:

- **`CHEAT_SHEET.md`** - ะััััะฐั ัะฟะฐัะณะฐะปะบะฐ ะบะพะผะฐะฝะด ะดะปั ะฒัะตั ะฒะตััะธะน
- **`ENCRYPTION.md`** - ะัะพัะพะบะพะป ัะธััะพะฒะฐะฝะธั AES-256-GCM
- **`PORTS.md`** - ะะพะบัะผะตะฝัะฐัะธั ัะตัะตะฒัั ะฟะพััะพะฒ
- **`PROJECT_STRUCTURE.md`** - ะญัะพั ัะฐะนะป (ััััะบัััะฐ ะฟัะพะตะบัะฐ)

### ๐ ะะพัะฝะตะฒัะต ะดะพะบัะผะตะฝัั

- **`README.md`** - ะะปะฐะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ
- **`BUILD.md`** - ะะฝััััะบัะธะธ ะฟะพ ัะฑะพัะบะต, ะทะฐะฟััะบั ะธ ะปะพะณะฐะผ
- **`VERSION_MANAGEMENT.md`** - ะัะบะพะฒะพะดััะฒะพ ะฟะพ ัะฟัะฐะฒะปะตะฝะธั ะฒะตััะธัะผะธ

---

## ๐ ะะฐะบัั ะฒะตััะธั ะธัะฟะพะปัะทะพะฒะฐัั?

| ะะตััะธั | ะะพะณะดะฐ ะธัะฟะพะปัะทะพะฒะฐัั |
|--------|-------------------|
| **Tauri** | ะะปั ัะพะฒัะตะผะตะฝะฝะพะณะพ UI, ะปัััะตะณะพ UX, ะบัะฐัะธะฒะพะณะพ ะดะธะทะฐะนะฝะฐ |
| **Python** | ะะปั ััะฐะฑะธะปัะฝะพะน ะดะตัะบัะพะฟะฝะพะน ะฒะตััะธะธ ะฑะตะท ะฒะตะฑ-ัะตัะฝะพะปะพะณะธะน |
| **Rust CLI** | ะะปั ัะบัะฟะตัะธะผะตะฝัะพะฒ, ัะบัะธะฟัะพะฒ, ะฐะฒัะพะผะฐัะธะทะฐัะธะธ |

**ะะตะบะพะผะตะฝะดะฐัะธั:** ะัะฟะพะปัะทัะนัะต **Tauri ะฒะตััะธั** ะดะปั ะปัััะตะณะพ ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะพะฟััะฐ.

---

## ๐ฆ ะััะตัะฐะบัั ัะฑะพัะบะธ

### Shared Library
- `shared-rs/target/` - ะกะบะพะผะฟะธะปะธัะพะฒะฐะฝะฝะฐั ะฑะธะฑะปะธะพัะตะบะฐ

### Tauri
- `tauri-app/src-tauri/target/` - ะกะบะพะผะฟะธะปะธัะพะฒะฐะฝะฝัะต ัะฐะนะปั (~5.4GB)

### Rust CLI
- `rust/target/debug/` - Debug ัะฑะพัะบะฐ
- `rust/target/release/` - Release ัะฑะพัะบะฐ (ะพะฟัะธะผะธะทะธัะพะฒะฐะฝะฝะฐั) (~3GB)

**ะัะธะผะตัะฐะฝะธะต:** ะะฐะฟะบะธ `target/` ะฝะฐัะพะดัััั ะฒ `.gitignore` ะธะท-ะทะฐ ะฑะพะปััะพะณะพ ัะฐะทะผะตัะฐ (ะพะฑัะธะน ัะฐะทะผะตั ~8.4GB).

**ะัะธััะบะฐ:** ะัะฟะพะปัะทัะนัะต `make clean-all` ะดะปั ะพัะฒะพะฑะพะถะดะตะฝะธั ะผะตััะฐ. ะกะผ. [CLEANUP.md](../CLEANUP.md)

---

## ๐ ะััะธัะตะบัััะฐ ะบะพะดะฐ

### ะะฑัะฐั ััะตะผะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         shared-rs (ะฑะธะฑะปะธะพัะตะบะฐ)          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ API Clients:                       โ โ
โ  โ  - AnthropicClient                 โ โ
โ  โ  - OpenAIClient                    โ โ
โ  โ  - TelegramClient                  โ โ
โ  โ Encryption: SecureMessenger        โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
           โฒ                    โฒ
           โ                    โ
    โโโโโโโโดโโโโโโโ      โโโโโโโดโโโโโโโ
    โ   rust/     โ      โ tauri-app/ โ
    โ (CLI/egui)  โ      โ  (modern)  โ
    โโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโ
```

### ะฃัััะฐะฝะตะฝะธะต ะดัะฑะปะธัะพะฒะฐะฝะธั

**ะะพ (v1.0.5):**
- `rust/src/api.rs` (311 ัััะพะบ)
- `tauri-app/src-tauri/src/api.rs` (311 ัััะพะบ) โ ะะฃะะะะะะข
- `rust/src/encryption.rs` (76 ัััะพะบ)
- `tauri-app/src-tauri/src/encryption.rs` (76 ัััะพะบ) โ ะะฃะะะะะะข

**ะะพัะปะต (v2.1.1):**
- `shared-rs/src/api.rs` (311 ัััะพะบ) โ ะะะะะซะ ะะกะขะะงะะะ
- `shared-rs/src/encryption.rs` (76 ัััะพะบ) โ ะะะะะซะ ะะกะขะะงะะะ

**ะญะบะพะฝะพะผะธั:** 774 ัััะพะบะธ ะบะพะดะฐ, ัะฟัะพัะตะฝะฝะฐั ะฟะพะดะดะตัะถะบะฐ

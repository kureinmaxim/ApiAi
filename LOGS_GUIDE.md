# üìã –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –ª–æ–≥–∞–º ApiAi

## GUI –õ–æ–≥–∏ (–û–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)

### –í—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –ª–æ–≥–æ–≤

ApiAi –≤—ã–≤–æ–¥–∏—Ç –ª–æ–≥–∏ –ø—Ä—è–º–æ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:

1. **–≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º** ‚Üí –≤–∏–¥–Ω–æ –æ–∫–Ω–æ –ª–æ–≥–æ–≤ –≤–Ω–∏–∑—É
2. **–ü—Ä–æ—Å—Ç–æ–π —Ä–µ–∂–∏–º** ‚Üí –ª–æ–≥–∏ —Å–∫—Ä—ã—Ç—ã, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –≤ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π

### –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –ª–æ–≥–∞—Ö

- ‚úÖ `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ API –∏ AI —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- üîÑ `–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ` - —Ç–µ—Å—Ç API –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚ö†Ô∏è `–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: 403` - –ø—Ä–æ–±–ª–µ–º–∞ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚ö†Ô∏è `–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: 404` - –Ω–µ–≤–µ—Ä–Ω—ã–π URL
- ‚ö†Ô∏è `Timeout` - —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
- üîí `–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ` - –∑–∞–ø—Ä–æ—Å—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è
- üì° `–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...` - –∑–∞–ø—Ä–æ—Å –∫ AI

## –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏ (–∫–æ–Ω—Å–æ–ª—å)

### –ó–∞–ø—É—Å–∫ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å:

```cmd
# Windows - –∏–∑ –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
cd c:\Project\ApiAi
python main.py

# –ò–ª–∏ –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
ApiAi.exe
```

### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏

- –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
- Traceback –ø—Ä–∏ –∫—Ä–∞—à–∞—Ö
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è Qt

## –§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏

### –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–≥–∏

```
Windows: %APPDATA%\ApiAi\logs\
         C:\Users\{USER}\AppData\Roaming\ApiAi\logs\

Linux:   ~/.local/share/ApiAi/logs/
macOS:   ~/Library/Application Support/ApiAi/logs/
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤

–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö):

- `app.log` - –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `api_requests.log` - –≤—Å–µ API –∑–∞–ø—Ä–æ—Å—ã
- `errors.log` - —Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤—ã—Ö –ª–æ–≥–æ–≤

```cmd
# Windows
type %APPDATA%\ApiAi\logs\app.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
powershell "Get-Content %APPDATA%\ApiAi\logs\app.log -Tail 50"
```

```bash
# Linux/macOS
cat ~/.local/share/ApiAi/logs/app.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -50 ~/.local/share/ApiAi/logs/app.log

# –í —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f ~/.local/share/ApiAi/logs/app.log
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥

```
–ò–∑ –ø—Ä–æ–µ–∫—Ç–∞:      c:\Project\ApiAi\config_qt.json
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: %LOCALAPPDATA%\ApiAi\config_qt.json
                 C:\Users\{USER}\AppData\Local\ApiAi\config_qt.json
```

### –ì–¥–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

```
–ò–∑ –ø—Ä–æ–µ–∫—Ç–∞:      c:\Project\ApiAi\.venv\
–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: %LOCALAPPDATA%\ApiAi\.venv\
                 C:\Users\{USER}\AppData\Local\ApiAi\.venv\
```

> **–í–∞–∂–Ω–æ:** –ò–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `%LOCALAPPDATA%\ApiAi` (–ø–∞–ø–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è), –ø–æ—ç—Ç–æ–º—É –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ù–ï —Ç—Ä–µ–±—É—é—Ç—Å—è.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞

```cmd
# Windows
type c:\Project\ApiAi\config_qt.json

# –ò–ª–∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
type %LOCALAPPDATA%\ApiAi\config_qt.json
```

### –í–∞–∂–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞

```json
{
  "api_keys": {
    "telegram_url": "http://YOUR_SERVER:8000/ai_query",
    "telegram_key": "your_api_key",
    "telegram_enc_key": "hex_encryption_key",
    "telegram_use_encryption": true,
    "app_id": "apiai-v1"
  },
  "telegram_security": {
    "app_id": "apiai-v1"
  }
}
```

## –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**

```cmd
# 1. –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å
icacls %LOCALAPPDATA%\ApiAi

# 2. –ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞
dir %LOCALAPPDATA%\ApiAi\config_qt.json

# 3. –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON
type %LOCALAPPDATA%\ApiAi\config_qt.json | python -m json.tool
```

### –ü—Ä–æ–±–ª–µ–º–∞: Connection Timeout

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –¥–æ—Å—Ç—É–ø–µ–Ω:**
   ```cmd
   curl http://YOUR_SERVER:8000/health
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥:**
   ```cmd
   type config_qt.json | findstr telegram_url
   ```

3. **–¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ Python:**
   ```python
   import requests
   url = "http://YOUR_SERVER:8000/ai_query"
   headers = {"X-API-KEY": "your_key", "X-APP-ID": "apiai-v1"}
   payload = {"prompt": "test", "provider": "anthropic", "max_tokens": 10}
   r = requests.post(url, json=payload, headers=headers, timeout=10)
   print(r.status_code, r.text)
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. –î–ª–∏–Ω–∞ –∫–ª—é—á–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 64 —Å–∏–º–≤–æ–ª–∞ hex):
   ```python
   enc_key = "your_hex_key"
   print(len(enc_key), "should be 64")
   ```

2. –¢–µ—Å—Ç —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è:
   ```python
   from encryption import SecureMessenger
   messenger = SecureMessenger("your_hex_key")
   data = {"test": "data"}
   encrypted = messenger.encrypt(data)
   decrypted = messenger.decrypt(encrypted)
   print(decrypted)
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: API –∫–ª—é—á –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
docker logs telegram-api | grep "your_api_key_prefix"
docker logs telegram-api | grep "Invalid API"
```

## –†–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏

### –í–∫–ª—é—á–∏—Ç—å verbose logging

–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `main.py`:

```python
import logging
logging.basicConfig(
    level=logging.DEBUG,  # –í–º–µ—Å—Ç–æ INFO
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s'
)
```

### –û—Ç–ª–∞–¥–∫–∞ API –∑–∞–ø—Ä–æ—Å–æ–≤

–í `gui/pdf_search.py` –¥–æ–±–∞–≤–∏—Ç—å:

```python
# –ü–µ—Ä–µ–¥ requests.post
print(f"URL: {url}")
print(f"Headers: {headers}")
print(f"Payload: {json.dumps(payload)[:200]}")

# –ü–æ—Å–ª–µ response
print(f"Status: {response.status_code}")
print(f"Response: {response.text[:500]}")
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –≤—Ä—É—á–Ω—É—é

### –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–°–æ–∑–¥–∞—Ç—å `test_api.py`:

```python
import requests
import json

url = "http://YOUR_SERVER:8000/ai_query"
api_key = "your_api_key"
app_id = "apiai-v1"

payload = {
    "prompt": "Test connection",
    "provider": "anthropic",
    "max_tokens": 10
}

headers = {
    "Content-Type": "application/json",
    "X-API-KEY": api_key,
    "X-APP-ID": "apiai-v1"
}

try:
    response = requests.post(url, json=payload, headers=headers, timeout=10)
    print(f"Status: {response.status_code}")
    print(f"Response: {response.json()}")
except Exception as e:
    print(f"Error: {e}")
```

–ó–∞–ø—É—Å–∫:
```cmd
python test_api.py
```

## –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ª–æ–≥–∏

```cmd
# Windows
mkdir logs_export
copy %LOCALAPPDATA%\ApiAi\config_qt.json logs_export\
copy %LOCALAPPDATA%\ApiAi\logs\*.log logs_export\
powershell Compress-Archive -Path logs_export -DestinationPath ApiAi_logs_%date%.zip
```

```bash
# Linux/macOS
mkdir logs_export
cp ~/.local/share/ApiAi/config_qt.json logs_export/
cp ~/.local/share/ApiAi/logs/*.log logs_export/
tar -czf ApiAi_logs_$(date +%Y%m%d).tar.gz logs_export/
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –£–¥–∞–ª–∏—Ç–µ API –∫–ª—é—á–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π!

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| `ModuleNotFoundError: requests` | –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ | `pip install -r requirements.txt` |
| `config_qt.json not found` | –ó–∞–ø—É—Å–∫ –∏–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–∏ | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ |
| `–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å` | –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Ç–æ–¥–∞ `get_config()` | –û–±–Ω–æ–≤–∏—Ç—å –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ |
| `Connection timeout` | –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–ª–∏ URL –ø—É—Å—Ç–æ–π | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ |
| `403 Forbidden` | –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á –∏–ª–∏ APP_ID | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á –∏ whitelist –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ |
| `Encryption failed` | –ù–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª–∏–Ω—É (64 —Å–∏–º–≤–æ–ª–∞ hex) |

## –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

- [ ] –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω: `curl http://SERVER:8000/health`
- [ ] –ö–æ–Ω—Ñ–∏–≥ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `dir config_qt.json`
- [ ] URL –∑–∞–ø–æ–ª–Ω–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- [ ] API –∫–ª—é—á –∑–∞–ø–æ–ª–Ω–µ–Ω
- [ ] APP_ID = `apiai-v1`
- [ ] –ï—Å–ª–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ - –∫–ª—é—á 64 —Å–∏–º–≤–æ–ª–∞
- [ ] –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ GUI –ª–æ–≥–∞—Ö
